@model CreateBlogDto
@{
    ViewData["Title"] = "CreateBlog";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<div class="card card-primary">
    <div class="card-header">
        <h3 class="card-title">Yeni Blog Oluştur</h3>
    </div>
    <form id="blogForm">
        <div class="card-body">
            <div class="form-group">
                <label for="exampleInputEmail1">Başlık</label>
                <input type="text" name="Title" id="title" class="form-control" placeholder="Başlık">
                
            </div>
            <div class="form-group">
                <label for="exampleInputEmail1">Blog Resim Url</label>
                <input type="text" name="CoverImageUrl" id="coverimageurl" class="form-control" placeholder="Blog Resim Url">
            </div>
            <div class="form-group">
                <label for="exampleInputPassword1">Açıklama</label>
                <textarea class="form-control" placeholder="Açıklama" id="description" name="Description"> </textarea>
            </div>
            <div class="form-group">
                <label for="exampleInputPassword1">Bilgilendirme</label>
                <textarea class="form-control" placeholder="Bilgilendirme" id="info" name="Info"> </textarea>
            </div>
            <div class="form-group">
                <label for="exampleInputEmail1">1. Resim Link</label>
                <input type="text" name="ImageUrl1" id="image1" class="form-control" placeholder="1. Resim Link">
            </div>
            <div class="form-group">
                <label for="exampleInputEmail1">2. Resim Link</label>
                <input type="text" name="ImageUrl2" id="image2" class="form-control" placeholder="2. Resim Link">
            </div>
            <span id="errorMessages" class="text-danger"></span>

        </div>
        <div class="card-footer">
            <button type="submit" class="btn btn-primary">Kaydet</button>
        </div>
    </form>
</div>

<script>
    $(document).ready(function () {
        $('#blogForm').on('submit', function (event) {
            event.preventDefault();

            var title = $('#title').val();
            var coverimageurl = $('#coverimageurl').val();
            var description = $('#description').val();
            var info = $('#info').val();
            var image1 = $('#image1').val();
            var image2 = $('#image2').val();
            var values = {
                Title:title,
                CoverImageUrl:coverimageurl,
                Description:description,
                Info:info,
                ImageUrl1:image1,
                ImageUrl2:image2
            };
            console.log(values);
            $('#errorMessages').empty();
            $.ajax({
                url: '/Admin/Blogs/CreateBlog',
                method: 'POST',
                data: values,
                success: function (response) {
                    alert("Başarılı");
                },
                error: function (response) {
                    var errors = response.responseJSON.errors;
                    var errorMessages = '';
                    errors.forEach(function (error) {
                        errorMessages += '<p>' + error + '</p>';
                    });
                    $('#errorMessages').html(errorMessages);
                    console.log(errorMessages);
                }
            });
        });
    });
</script>
