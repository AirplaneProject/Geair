@using Microsoft.AspNetCore.SignalR
@{
    ViewData["Title"] = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

<script type="text/javascript" src="https://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="~/lib/microsoft/signalr/dist/browser/signalr.min.js"></script>

<script type="text/javascript">

    $(document).ready(() => {
        var connection = new signalR.HubConnectionBuilder().withUrl("https://localhost:7151/SignalRHub").build();

        connection.start().then(() => {
            setInterval(() => {
                connection.invoke("SendStatistic");
            }, 1000);
        }).catch((err) => { console.log(err) });

        connection.on("ReceiveUserCount", (value) => { $("#usercount").text(value); });
        connection.on("ReceiveFlightCount", (value1) => { $("#flightcount").text(value1); });
        connection.on("ReceiveAirportCount", (value2) => { $("#airportcount").text(value2); });
        connection.on("ReceiveAircraftCount", (value3) => { $("#aircraftcount").text(value3); });
        connection.on("ReceiveTicketCount", (value4) => { $("#ticketcount").text(value4); });
        connection.on("ReceiveBlogCount", (value5) => { $("#blogcount").text(value5); });
        connection.on("ReceiveTravelCount", (value6) => { $("#travelcount").text(value6); });
        connection.on("ReceiveNewsletterCount", (value7) => { $("#newslettercount").text(value7); });
        connection.on("ReceiveBlogCategoriesCount", (value8) => { $("#blogcategoriescount").text(value8); });
        connection.on("ReceiveRoleCount", (value9) => { $("#rolecount").text(value9); });

        connection.on("ReceiveLastFlyDateAndHour", (value10) => { $("#lastFlyDateAndHour").text(value10); });
        connection.on("ReceiveLastTravelDateAndHour", (value11) => { $("#lastTravelDateAndHour").text(value11); });
        connection.on("ReceiveMostCategoryName", (value12) => { $("#mostCategoryName").text(value12); });
        connection.on("ReceiveMostRegisterTravel", (value13) => { $("#mostRegisterTravel").text(value13); });
        connection.on("ReceiveMostWriterBlogUser", (value14) => { $("#mostWriterBlogUser").text(value14); });
    });

</script>

<h5>İstatistikler</h5>
<div class="row">
    <div class="col-lg-3 col-6">
        <!-- small card -->
        <div class="small-box bg-info">
            <div class="inner">
                <h3 id="usercount"></h3>

                <p>Kullanıcı Sayısı</p>
            </div>
            <div class="icon">
                <i class="fas fa-user-plus"></i>
            </div>
          
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <!-- small card -->
        <div class="small-box bg-success">
            <div class="inner">
                <h3 id="flightcount"></h3>

                <p>Uçuş Sayısı</p>
            </div>
            <div class="icon">
                <i class="ion ion-stats-bars"></i>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <!-- small card -->
        <div class="small-box bg-warning">
            <div class="inner">
                <h3 id="airportcount"></h3>

                <p>Havaalanı Sayısı</p>
            </div>
            <div class="icon">
                <i class="fas fa-user-plus"></i>
            </div>
            
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <!-- small card -->
        <div class="small-box bg-danger">
            <div class="inner">
                <h3 id="aircraftcount"></h3>

                <p>Uçak Sayısı</p>
            </div>
            <div class="icon">
                <i class="fas fa-chart-pie"></i>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <!-- small card -->
        <div class="small-box bg-danger">
            <div class="inner">
                <h3 id="ticketcount"></h3>

                <p>Bilet Sayısı</p>
            </div>
            <div class="icon">
                <i class="fas fa-chart-pie"></i>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <!-- small card -->
        <div class="small-box bg-light">
            <div class="inner">
                <h3 id="blogcount"></h3>

                <p>Blog Sayısı</p>
            </div>
            <div class="icon">
                <i class="fas fa-blog"></i>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <!-- small card -->
        <div class="small-box bg-success">
            <div class="inner">
                <h3 id="travelcount"></h3>

                <p>Tur Sayısı</p>
            </div>
            <div class="icon">
                <i class="fas fa-tour"></i>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <!-- small card -->
        <div class="small-box bg-warning">
            <div class="inner">
                <h3 id="newslettercount"></h3>

                <p>Haftalık Bülten Üye Sayısı</p>
            </div>
            <div class="icon">
                <i class="fas fa-user"></i>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <!-- small card -->
        <div class="small-box bg-primary">
            <div class="inner">
                <h3 id="blogcategoriescount"></h3>

                <p>Blog Kategori Sayısı</p>
            </div>
            <div class="icon">
                <i class="fas fa-blog"></i>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <!-- small card -->
        <div class="small-box bg-success">
            <div class="inner">
                <h3 id="rolecount"></h3>

                <p>Kullanıcı Rol Sayısı</p>
            </div>
            <div class="icon">
                <i class="fas fa-users"></i>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <!-- small card -->
        <div class="small-box bg-warning">
            <div class="inner">
                <h3 id="lastFlyDateAndHour"></h3>

                <p>En Son Uçuş Planı Tarihi</p>
            </div>
            <div class="icon">
                <i class="fas fa-plane"></i>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <!-- small card -->
        <div class="small-box bg-danger">
            <div class="inner">
                <h3 id="lastTravelDateAndHour"></h3>

                <p>En Son Tur Planı Tarihi</p>
            </div>
            <div class="icon">
                <i class="fas fa-chess"></i>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <!-- small card -->
        <div class="small-box bg-light">
            <div class="inner">
                <h3 id="mostCategoryName"></h3>

                <p>Blog Sayısı En Fazla Kategori</p>
            </div>
            <div class="icon">
                <i class="fas fa-list"></i>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <!-- small card -->
        <div class="small-box bg-primary">
            <div class="inner">
                <h3 id="mostRegisterTravel"></h3>

                <p>En Çok Kayıt Alan Tur</p>
            </div>
            <div class="icon">
                <i class="fas fa-globe"></i>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <!-- small card -->
        <div class="small-box bg-success">
            <div class="inner">
                <h3 id="mostWriterBlogUser"></h3>

                <p>En Çok Blog Yazan Kullanıcı</p>
            </div>
            <div class="icon">
                <i class="fas fa-star"></i>
            </div>
        </div>
    </div>
</div>

